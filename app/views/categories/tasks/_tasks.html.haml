.tasks
  - unless @tasks.any?
    %br/
    %p This category is empty. Create a new task by clicking the plus icon.
  - else
    - if @category && @tasks.complete.count != 0
      %p.toggle.toggle-completed.fake-link.break Toggle Completed
    - else
      %p.toggle.toggle-completed.fake-link.hide Toggle Completed
      .break
    - @tasks.each do |task|
      - unless task.id.nil?
        %div{class: task.completed ? "completed-task" : "task"}
          = link_to complete_path(task), remote: true, method: :patch, data: { params: :task } do
            .tickbox
              %span
                %i.fa.fa-check
          .info
            %li.task-content= task.content
            %li
              - d = task.deadline_date
              - t = task.deadline_time
              %span{class: task.overdue? ? "sub-info task-overdue-deadline" : "sub-info"}
                = deadline_date(d) + deadline_time(t)
              - if task.repeat == 1
                %span.sub-info.task-repeat= task.repeat_message
            - if !task.notes.blank?
              %span.fake-link.toggle-more Notes
              %li.task-more= task.notes
          %span.fake-link.menu-toggle
            %i.fa.fa-cog
          .task-menu
            %li.action-link.move-task
              = link_to "Move", category_move_form_path(task.category, task)
            %li.action-link.edit-task
              = link_to "Edit", edit_category_task_path(task.category, task)
            %li.action-link.delete-task
              = link_to "Delete", task, method: :delete, remote: true
