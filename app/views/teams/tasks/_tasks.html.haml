- unless @tasks.any?
  ="The team currently has no tasks. Make one"
  =link_to "here.", new_team_task_path(@team)
- else
  - if @team && @tasks.complete.count != 0
    %p.toggle.toggle-completed.fake-link.break Toggle Completed
  - @tasks.each do |task|
    - unless task.id.nil?
      %div{class: task.completed ? "completed-task" : "task"}
        = link_to complete_path(task), remote: true, method: :patch, data: { params: :task } do
          .tickbox
            %span
              %i.fa.fa-check
        .info
          %li.task-content= task.content
          %li
            - d = task.deadline_date
            - t = task.deadline_time
            %span{class: task.overdue? ? "sub-info task-overdue-deadline" : "sub-info"}
              = deadline_date(d) + comma(d, t) + deadline_time(t)
            - if task.repeat == 1
              %span.sub-info.task-repeat= task.repeat_message
          - if !task.notes.blank?
            %span.fake-link.toggle-more More
            %li.task-more= task.notes
        .small-links
          %span.fake-link.menu-toggle
            %i.fa.fa-cog
          .task-menu
            %li.action-link.move-task
              = link_to "Accept", team_move_form_path(@team, task)
            %li.action-link.edit-task
              = link_to "Edit", edit_team_task_path(@team, task)
            %li.action-link.allocate-task
              = link_to "Allocate", new_task_allocation_path(task)
            - if @membership && @membership.admin == true
              %li.action-link.delete-task
                = link_to "Delete", task, method: :delete, remote: true
